{"version":3,"sources":["Chart.tsx","Graph.tsx","ParserModule.tsx","Settings.tsx","Main.tsx","reportWebVitals.ts","index.tsx"],"names":["MyChart","props","data","generateData","state","header","this","model","compartments","forEach","c","push","name","i","dataPoint","timeSteps","value","currentTick","className","width","height","chartType","loader","options","hAxis","title","vAxis","rootProps","React","Component","Graph","generateInitialDataStructure","node","id","size","length","nodes","links","graphData","nodeLabel","nodeVal","ParserModule","parser","generate","event","setNewModel","parse","preventDefault","setState","target","onSubmit","onClick","bind","onChange","handleChange","type","Settings","onSimulate1","onSimulate","onSimulate10","onSimulate100","onSimulate1000","parseInt","steps","onChangeStepSize","changeStepSize","parseFloat","stepSize","handleChangeSteps","handleChangeStepSize","Evaluator","require","Parser","Main","setModel","newModel","console","log","n","solveSteps","parameters","variables","interVariables","Map","k1","evaluateExpression","ODE","set","k2","allK","get","k3","k4","res","h","midpoints","lastPoint","k","z1","m","zm1","zm","triangleMatrix","modifiedMidpointMethod","Rnm","val","p","applyResult","bulirschStoerMethod","exp","evaluate","Object","fromEntries","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3d5246f2.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Chart from \"react-google-charts\";\r\n\r\nimport \"./Chart.css\";\r\nimport { CModel } from \"./Types\";\r\n\r\ninterface IProps {\r\n    model: CModel;\r\n    timeSteps: number[];\r\n    currentTick: number;\r\n}\r\n\r\ninterface IState {\r\n    data: any[];\r\n}\r\n\r\nexport default class MyChart extends React.Component<IProps, IState> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        var data = this.generateData();\r\n        this.state = {\r\n            data: data,\r\n        };\r\n    }\r\n\r\n    generateData() {\r\n        var data: any[] = [];\r\n        var header = [\"x\"];\r\n        this.props.model.compartments.forEach((c) => header.push(c.name));\r\n        data.push(header);\r\n        for (let i = 0; i <= this.props.currentTick; i++) {\r\n            var dataPoint = [this.props.timeSteps[i]];\r\n            this.props.model.compartments.forEach((c) => dataPoint.push(c.value[i]));\r\n            data.push(dataPoint);\r\n        }\r\n        //console.log(data);\r\n\r\n        return data;\r\n    }\r\n\r\n    componentDidMount() {}\r\n\r\n    onClick() {}\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"chart\">\r\n                Chart\r\n                <Chart\r\n                    width={\"600px\"}\r\n                    height={\"400px\"}\r\n                    chartType=\"LineChart\"\r\n                    loader={<div>Loading Chart</div>}\r\n                    data={this.state.data}\r\n                    options={{\r\n                        hAxis: {\r\n                            title: \"Time\",\r\n                        },\r\n                        vAxis: {\r\n                            title: \"Value\",\r\n                        },\r\n                    }}\r\n                    rootProps={{ \"data-testid\": \"2\" }}\r\n                />\r\n                {\r\n                    //<button onClick={this.onClick.bind(this)}>Test</button>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport ForceGraph2D, { NodeObject } from \"react-force-graph-2d\";\r\n\r\nimport \"./Graph.css\";\r\nimport { CModel } from \"./Types\";\r\n\r\ninterface NodeType extends NodeObject {\r\n    size: number;\r\n}\r\n\r\ninterface IProps {\r\n    model: CModel;\r\n}\r\n\r\ninterface IState {\r\n    data: { nodes: { id: string; size: number }[]; links: { source: string; target: string }[] };\r\n}\r\n\r\nexport default class Graph extends React.Component<IProps, IState> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n\r\n        var data = this.generateInitialDataStructure();\r\n        //console.log(data);\r\n\r\n        this.state = {\r\n            data: data,\r\n        };\r\n    }\r\n\r\n    generateInitialDataStructure() {\r\n        var node: { id: string; size: number }[] = [];\r\n        this.props.model.compartments.forEach((c) => {\r\n            node.push({ id: c.name, size: c.value[c.value.length - 1] });\r\n        });\r\n        var link: { source: string; target: string }[] = [];\r\n        //this.props.model.reactions.forEach((c) => {            link.push({ source: c.orig, target: c.dest });        });\r\n        return { nodes: node, links: link };\r\n    }\r\n\r\n    componentDidMount() {}\r\n\r\n    onClick() {}\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"graph\">\r\n                Graph\r\n                <ForceGraph2D\r\n                    graphData={this.state.data}\r\n                    nodeLabel=\"id\"\r\n                    nodeVal={(node) => (node as NodeType).size}\r\n                    width={500}\r\n                    height={500}\r\n                />\r\n                {\r\n                    //<button onClick={this.onClick.bind(this)}>Test</button>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport \"./ParserModule.css\";\r\nimport { CModel } from \"./Types\";\r\nimport { Parser, generate } from \"peggy\";\r\n\r\nvar modelGrammar = `{{\r\nfunction makeFloat(o) {\r\n    return parseFloat(o.join(\"\"), 10);\r\n}\r\n}}\r\n\r\nmodel = parameters:parameter* _ compartments:compartment+ {return {parameters, compartments};}\r\ncompartment = \"(\" _ \"comp\" _ name:ident _ value:value _ ODE:calc _ \")\" _ {return {name, value:[value], ODE};}\r\nparameter = \"(\" _ \"param\" _ name:ident _ value:value _ \")\" _ {return {name, value};}\r\nident = ident:[A-Za-z]+ {return ident.join(\"\")}\r\nvalue = digits:[0-9.]+ {return makeFloat(digits);}\r\n_ \"whitespace\" = [ \\\\t\\\\n\\\\r]*\r\ncalc = \"{\" calc:[^}]* \"}\" {return calc.join(\"\")}`;\r\n\r\ninterface IProps {\r\n    setNewModel: (newModel: CModel) => void;\r\n}\r\n\r\ninterface IState {\r\n    value: string;\r\n    parser: Parser;\r\n}\r\n\r\nexport default class ParserModule extends React.Component<IProps, IState> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.state = {\r\n            value: `(param alpha 0.75)\r\n(param beta 0.1)\r\n(param N 10000)\r\n\r\n(comp S 9999 {-alpha*S*I/N})\r\n(comp I 1 {alpha*S*I/N - beta*I})\r\n(comp R 0 {beta*I})`,\r\n            parser: generate(modelGrammar),\r\n        };\r\n    }\r\n\r\n    //Parse Model\r\n    onClick(event: any) {\r\n        //parse Input\r\n        this.props.setNewModel(this.state.parser.parse(this.state.value));\r\n        event.preventDefault();\r\n    }\r\n\r\n    handleChange(event: any) {\r\n        this.setState({ value: event.target.value });\r\n    }\r\n\r\n    componentDidMount() {}\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"parser\">\r\n                Parser\r\n                <form onSubmit={this.onClick.bind(this)}>\r\n                    <label>\r\n                        Model:\r\n                        <br />\r\n                        <textarea\r\n                            className=\"parserText\"\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange.bind(this)}\r\n                        />\r\n                    </label>\r\n                    <br />\r\n                    <input type=\"submit\" value=\"Submit\" />\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport \"./Settings.css\";\r\n\r\ninterface IProps {\r\n    onSimulate: (n: number) => void;\r\n    changeStepSize: (stepSize: number) => void;\r\n    stepSize: number;\r\n}\r\n\r\ninterface IState {\r\n    steps: string;\r\n    stepSize: string;\r\n}\r\n\r\nexport default class Settings extends React.Component<IProps, IState> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.state = { steps: \"\", stepSize: \"\" };\r\n    }\r\n\r\n    onSimulate1 = () => {\r\n        this.props.onSimulate(1);\r\n    };\r\n    onSimulate10 = () => {\r\n        this.props.onSimulate(10);\r\n    };\r\n    onSimulate100 = () => {\r\n        this.props.onSimulate(100);\r\n    };\r\n    onSimulate1000 = () => {\r\n        this.props.onSimulate(1000);\r\n    };\r\n    onSimulate = () => {\r\n        this.props.onSimulate(parseInt(this.state.steps));\r\n    };\r\n\r\n    onChangeStepSize = () => {\r\n        this.props.changeStepSize(parseFloat(this.state.stepSize));\r\n    };\r\n\r\n    handleChangeSteps = (event: any) => {\r\n        this.setState({ steps: event.target.value });\r\n    };\r\n\r\n    handleChangeStepSize = (event: any) => {\r\n        this.setState({ stepSize: event.target.value });\r\n    };\r\n\r\n    componentDidMount() {}\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"settings\">\r\n                Settings\r\n                <br />\r\n                <button onClick={this.onSimulate1}>Simulate 1</button>\r\n                <button onClick={this.onSimulate10}>Simulate 10</button>\r\n                <button onClick={this.onSimulate100}>Simulate 100</button>\r\n                <button onClick={this.onSimulate1000}>Simulate 1000</button>\r\n                <button onClick={this.onSimulate}>Simulate: </button>\r\n                <input type=\"text\" value={this.state.steps} onChange={this.handleChangeSteps} />\r\n                <br />\r\n                <button onClick={this.onChangeStepSize}>Change Step Size (currently: {this.props.stepSize}): </button>\r\n                <input type=\"text\" value={this.state.stepSize} onChange={this.handleChangeStepSize} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { CModel } from \"./Types\";\r\nimport MyChart from \"./Chart\";\r\nimport Graph from \"./Graph\";\r\nimport ParserModule from \"./ParserModule\";\r\nimport Settings from \"./Settings\";\r\n\r\nconst Evaluator = require(\"expr-eval\").Parser;\r\n\r\ninterface IProps {}\r\n\r\ninterface IState {\r\n    model: CModel;\r\n    timeSteps: number[];\r\n    stepSize: number;\r\n    currentTick: number;\r\n}\r\n\r\nexport default class Main extends React.Component<IProps, IState> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.state = {\r\n            model: { parameters: [], compartments: [] },\r\n            stepSize: 0.1,\r\n            currentTick: 0,\r\n            timeSteps: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {}\r\n\r\n    setModel = (newModel: CModel) => {\r\n        this.setState({ model: newModel, currentTick: 0, timeSteps: [0] });\r\n    };\r\n\r\n    onClick = () => {\r\n        console.log(this.state.model);\r\n    };\r\n\r\n    onSimulate = (n: number) => {\r\n        this.solveSteps(n);\r\n    };\r\n\r\n    changeStepSize = (stepSize: number) => {\r\n        this.setState({ stepSize: stepSize });\r\n    };\r\n\r\n    //solvers\r\n    //Runge-Kutta solver 2 Order\r\n    rungeKutta2(variables: Map<string, number>) {\r\n        var interVariables = new Map(variables); //contains variable values at half point of the step\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k1 = this.evaluateExpression(c.ODE, variables) * (this.state.stepSize / 2);\r\n            interVariables.set(c.name, c.value[c.value.length - 1] + k1);\r\n        });\r\n\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k2 = this.evaluateExpression(c.ODE, interVariables) * this.state.stepSize;\r\n            c.value.push(c.value[c.value.length - 1] + k2);\r\n        });\r\n    }\r\n\r\n    //Runge-Kutta solver 4 Order\r\n    rungeKutta4(variables: Map<string, number>) {\r\n        var interVariables = new Map(variables); //contains variables for intermediary steps\r\n        var allK = new Map();\r\n        //calc k1\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k1 = this.evaluateExpression(c.ODE, variables) * this.state.stepSize;\r\n            interVariables.set(c.name, c.value[c.value.length - 1] + k1 / 2);\r\n            allK.set(c.name, [k1]);\r\n        });\r\n        //calc k2\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k2 = this.evaluateExpression(c.ODE, interVariables) * this.state.stepSize;\r\n            interVariables.set(c.name, c.value[c.value.length - 1] + k2 / 2);\r\n            allK.get(c.name).push(k2);\r\n        });\r\n        //calc k3\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k3 = this.evaluateExpression(c.ODE, interVariables) * this.state.stepSize;\r\n            interVariables.set(c.name, c.value[c.value.length - 1] + k3);\r\n            allK.get(c.name).push(k3);\r\n        });\r\n        //calc k4\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k4 = this.evaluateExpression(c.ODE, interVariables) * this.state.stepSize;\r\n            allK.get(c.name).push(k4);\r\n        });\r\n        //calc y_n+1\r\n        this.state.model.compartments.forEach((c) => {\r\n            c.value.push(\r\n                c.value[c.value.length - 1] +\r\n                    (1 / 6) * allK.get(c.name)[0] + //k1\r\n                    (2 / 6) * allK.get(c.name)[1] + //k2\r\n                    (2 / 6) * allK.get(c.name)[2] + //k3\r\n                    (1 / 6) * allK.get(c.name)[3], //k4\r\n            );\r\n        });\r\n    }\r\n\r\n    euler(variables: Map<string, number>) {\r\n        this.state.model.compartments.forEach((c) => {\r\n            var res = this.evaluateExpression(c.ODE, variables) * this.state.stepSize;\r\n            c.value.push(c.value[c.value.length - 1] + res);\r\n        });\r\n    }\r\n\r\n    //modified midpoint method\r\n    modifiedMidpointMethod(variables: Map<string, number>, n: number) {\r\n        //stepSize == H\r\n        //h == H/n\r\n        var h = this.state.stepSize / n;\r\n        var interVariables = new Map(variables); //contains variables for intermediary steps\r\n        var midpoints: Map<string, number[]> = new Map();\r\n        var lastPoint: Map<string, number> = new Map();\r\n\r\n        //z0 == yn == current state\r\n        //z1 = z0 + h * f(x, z0)\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k = this.evaluateExpression(c.ODE, interVariables);\r\n            var z1 = c.value[c.value.length - 1] + h * k;\r\n\r\n            interVariables.set(c.name, z1);\r\n            midpoints.set(c.name, [c.value[c.value.length - 1], z1]);\r\n        });\r\n\r\n        //zm+1 = zm−1 + 2h ∗ f(x + m ∗ h, zm) with m = 1, 2, ..., n − 1\r\n        for (let m = 1; m < n; m++) {\r\n            this.state.model.compartments.forEach((c) => {\r\n                var k = this.evaluateExpression(c.ODE, interVariables);\r\n                var zm1 = midpoints.get(c.name)![m - 1] + 2 * h * k;\r\n\r\n                interVariables.set(c.name, zm1);\r\n                midpoints.get(c.name)!.push(zm1);\r\n            });\r\n        }\r\n\r\n        //y(x + H) ≈ yn ≡ 1/2*(zn + zn−1 + h ∗ f(x + H, zn))\r\n        this.state.model.compartments.forEach((c) => {\r\n            var k = this.evaluateExpression(c.ODE, interVariables);\r\n            var zm = (1 / 2) * (midpoints.get(c.name)![n] + midpoints.get(c.name)![n - 1] + h * k);\r\n            lastPoint.set(c.name, zm);\r\n        });\r\n        return lastPoint;\r\n    }\r\n\r\n    //Bulirsch-Stoer Method\r\n    bulirschStoerMethod(variables: Map<string, number>) {\r\n        var depth = 4;\r\n\r\n        var triangleMatrix: Map<string, number>[][] = [];\r\n        for (let n = 0; n < depth; n++) {\r\n            //rows\r\n            triangleMatrix[n] = [];\r\n            for (let m = 0; m <= n; m++) {\r\n                //columns\r\n                if (m === 0) {\r\n                    //steps = 2(i+1)\r\n                    triangleMatrix[n][m] = this.modifiedMidpointMethod(variables, 2 * (n + 1));\r\n                } else {\r\n                    var Rnm: Map<string, number> = new Map();\r\n                    this.state.model.compartments.forEach((c) => {\r\n                        var val =\r\n                            triangleMatrix[n][m - 1].get(c.name)! +\r\n                            (triangleMatrix[n][m - 1].get(c.name)! - triangleMatrix[n - 1][m - 1].get(c.name)!) /\r\n                                ((n / (n - 1)) ** (2 * m) - 1);\r\n                        Rnm.set(c.name, val);\r\n                    });\r\n                    triangleMatrix[n][m] = Rnm;\r\n                }\r\n            }\r\n        }\r\n\r\n        return triangleMatrix[triangleMatrix.length - 1][triangleMatrix[triangleMatrix.length - 1].length - 1];\r\n    }\r\n\r\n    applyResult(res: Map<string, number>) {\r\n        this.state.model.compartments.forEach((c) => {\r\n            c.value.push(res.get(c.name)!);\r\n        });\r\n    }\r\n\r\n    //Main for solvers\r\n    solveSteps(steps: number) {\r\n        for (let i = 0; i < steps; i++) {\r\n            var variables = new Map();\r\n            this.state.model.compartments.forEach((c) => variables.set(c.name, c.value[this.state.currentTick + i]));\r\n            this.state.model.parameters.forEach((p) => variables.set(p.name, p.value)); //TODO insert Constant at parse time\r\n            //calculate Step\r\n            //this.euler(variables);\r\n            //this.rungeKutta2(variables);\r\n            //this.rungeKutta4(variables);\r\n            //this.applyResult(this.modifiedMidpointMethod(variables, 8));\r\n            this.applyResult(this.bulirschStoerMethod(variables));\r\n            //save Timestamps for variable step size\r\n            this.state.timeSteps.push(this.state.timeSteps[this.state.currentTick + i] + this.state.stepSize);\r\n        }\r\n        //endCurrentTick\r\n        this.setState({ currentTick: this.state.currentTick + steps });\r\n    }\r\n\r\n    evaluateExpression(exp: string, variables: Map<string, number>): number {\r\n        return Evaluator.evaluate(exp, Object.fromEntries(variables));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                Test\r\n                <button onClick={this.onClick}>Test</button>\r\n                <a href=\"https://github.com/NeverfullD/cmv\">to Github</a>\r\n                <ParserModule setNewModel={this.setModel} />\r\n                <Settings\r\n                    onSimulate={this.onSimulate}\r\n                    changeStepSize={this.changeStepSize}\r\n                    stepSize={this.state.stepSize}\r\n                />\r\n                <MyChart\r\n                    model={this.state.model}\r\n                    timeSteps={this.state.timeSteps}\r\n                    currentTick={this.state.currentTick}\r\n                    key={this.state.currentTick + \"chart\"}\r\n                />\r\n                <Graph model={this.state.model} key={this.state.currentTick + \"graph\"} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Main from \"./Main\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Main />\n    </React.StrictMode>,\n    document.getElementById(\"root\"),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}