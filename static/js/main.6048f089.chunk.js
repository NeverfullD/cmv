(this.webpackJsonpcmv=this.webpackJsonpcmv||[]).push([[0],{45:function(t,e,n){},48:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){},74:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),s=n(28),r=n.n(s),c=(n(45),n(5)),o=n(6),u=n(7),l=n(8),p=n(31),h=(n(48),n(2)),m=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;Object(c.a)(this,n);var i=(a=e.call(this,t)).generateData();return a.state={data:i},a}return Object(o.a)(n,[{key:"generateData",value:function(){var t=this,e=[],n=["x"];this.props.model.compartments.forEach((function(t){return n.push(t.name)})),e.push(n);for(var a=function(n){s=[t.props.timeSteps[n]],t.props.model.compartments.forEach((function(t){return s.push(t.value[n])})),e.push(s)},i=0;i<=this.props.currentTick;i++){var s;a(i)}return console.log(e),e}},{key:"componentDidMount",value:function(){}},{key:"onClick",value:function(){}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"chart",children:["Chart",Object(h.jsx)(p.a,{width:"600px",height:"400px",chartType:"LineChart",loader:Object(h.jsx)("div",{children:"Loading Chart"}),data:this.state.data,options:{hAxis:{title:"Time"},vAxis:{title:"Value"}},rootProps:{"data-testid":"2"}})]})}}]),n}(i.a.Component),j=n(38),d=(n(61),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;Object(c.a)(this,n);var i=(a=e.call(this,t)).generateInitialDataStructure();return console.log(i),a.state={data:i},a}return Object(o.a)(n,[{key:"generateInitialDataStructure",value:function(){var t=[];this.props.model.compartments.forEach((function(e){t.push({id:e.name,size:e.value[e.value.length-1]})}));return{nodes:t,links:[]}}},{key:"componentDidMount",value:function(){}},{key:"onClick",value:function(){}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"graph",children:["Graph",Object(h.jsx)(j.a,{graphData:this.state.data,nodeLabel:"id",nodeVal:function(t){return t.size},width:500,height:500})]})}}]),n}(i.a.Component)),v=(n(62),n(37)),b=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={value:"(param alpha 0.75)\n(param beta 0.1)\n(param N 10000)\n\n(comp S 9999 {-alpha*S*I/N})\n(comp I 1 {alpha*S*I/N - beta*I})\n(comp R 0 {beta*I})",parser:Object(v.generate)('{{\nfunction makeFloat(o) {\n    return parseFloat(o.join(""), 10);\n}\n}}\n\nmodel = parameters:parameter* _ compartments:compartment+ {return {parameters, compartments};}\ncompartment = "(" _ "comp" _ name:ident _ value:value _ ODE:calc _ ")" _ {return {name, value:[value], ODE};}\nparameter = "(" _ "param" _ name:ident _ value:value _ ")" _ {return {name, value};}\nident = ident:[A-Za-z]+ {return ident.join("")}\nvalue = digits:[0-9.]+ {return makeFloat(digits);}\n_ "whitespace" = [ \\t\\n\\r]*\ncalc = "{" calc:[^}]* "}" {return calc.join("")}')},a}return Object(o.a)(n,[{key:"onClick",value:function(t){this.props.setNewModel(this.state.parser.parse(this.state.value)),t.preventDefault()}},{key:"handleChange",value:function(t){this.setState({value:t.target.value})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"parser",children:["Parser",Object(h.jsxs)("form",{onSubmit:this.onClick.bind(this),children:[Object(h.jsxs)("label",{children:["Model:",Object(h.jsx)("br",{}),Object(h.jsx)("textarea",{className:"parserText",value:this.state.value,onChange:this.handleChange.bind(this)})]}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"submit",value:"Submit"})]})]})}}]),n}(i.a.Component),S=(n(74),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).onSimulate1=function(){a.props.onSimulate(1)},a.onSimulate10=function(){a.props.onSimulate(10)},a.onSimulate100=function(){a.props.onSimulate(100)},a.onSimulate1000=function(){a.props.onSimulate(1e3)},a.onSimulate=function(){a.props.onSimulate(parseInt(a.state.steps))},a.onChangeStepSize=function(){a.props.changeStepSize(parseFloat(a.state.stepSize))},a.handleChangeSteps=function(t){a.setState({steps:t.target.value})},a.handleChangeStepSize=function(t){a.setState({stepSize:t.target.value})},a.state={steps:"",stepSize:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"settings",children:["Settings",Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:this.onSimulate1,children:"Simulate 1"}),Object(h.jsx)("button",{onClick:this.onSimulate10,children:"Simulate 10"}),Object(h.jsx)("button",{onClick:this.onSimulate100,children:"Simulate 100"}),Object(h.jsx)("button",{onClick:this.onSimulate1000,children:"Simulate 1000"}),Object(h.jsx)("button",{onClick:this.onSimulate,children:"Simulate: "}),Object(h.jsx)("input",{type:"text",value:this.state.steps,onChange:this.handleChangeSteps}),Object(h.jsx)("br",{}),Object(h.jsxs)("button",{onClick:this.onChangeStepSize,children:["Change Step Size (currently: ",this.props.stepSize,"): "]}),Object(h.jsx)("input",{type:"text",value:this.state.stepSize,onChange:this.handleChangeStepSize})]})}}]),n}(i.a.Component)),f=n(75).Parser,O=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).setModel=function(t){a.setState({model:t,currentTick:0,timeSteps:[0]})},a.onClick=function(){console.log(a.state.model)},a.onSimulate=function(t){a.solveSteps(t)},a.changeStepSize=function(t){a.setState({stepSize:t})},a.state={model:{parameters:[],compartments:[]},stepSize:.1,currentTick:0,timeSteps:[]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"solveSteps",value:function(t){for(var e=this,n=function(t){i=new Map,e.state.model.compartments.forEach((function(n){return i.set(n.name,n.value[e.state.currentTick+t])})),e.state.model.parameters.forEach((function(t){return i.set(t.name,t.value)})),e.state.model.compartments.forEach((function(t){var n=e.evaluateExpression(t.ODE,i)*e.state.stepSize;t.value.push(t.value[t.value.length-1]+n)})),e.state.timeSteps.push(e.state.timeSteps[e.state.currentTick+t]+e.state.stepSize)},a=0;a<t;a++){var i;n(a)}this.setState({currentTick:this.state.currentTick+t})}},{key:"evaluateExpression",value:function(t,e){return f.evaluate(t,Object.fromEntries(e))}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:["Test",Object(h.jsx)("button",{onClick:this.onClick,children:"Test"}),Object(h.jsx)("a",{href:"https://github.com/NeverfullD/cmv",children:"to Github"}),Object(h.jsx)(b,{setNewModel:this.setModel}),Object(h.jsx)(S,{onSimulate:this.onSimulate,changeStepSize:this.changeStepSize,stepSize:this.state.stepSize}),Object(h.jsx)(m,{model:this.state.model,timeSteps:this.state.timeSteps,currentTick:this.state.currentTick},this.state.currentTick+"chart"),Object(h.jsx)(d,{model:this.state.model},this.state.currentTick+"graph")]})}}]),n}(i.a.Component),k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),s(t),r(t)}))};r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root")),k()}},[[76,1,2]]]);
//# sourceMappingURL=main.6048f089.chunk.js.map